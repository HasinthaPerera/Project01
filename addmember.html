<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Add Member | Member Management System</title>
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Firebase SDKs -->
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>

  <style>
    body {
      background-color: #111827;
      color: white;
    }
  </style>
</head>
<body class="min-h-screen flex flex-col justify-center items-center text-center">

  <!-- Language Switch -->
  <div class="absolute top-4 right-4 space-x-2">
    <button onclick="setLanguage('en')" class="px-3 py-1 bg-blue-600 rounded">EN</button>
    <button onclick="setLanguage('si')" class="px-3 py-1 bg-green-600 rounded">‡∑É‡∑í‡∂Ç</button>
    <button onclick="setLanguage('ta')" class="px-3 py-1 bg-pink-600 rounded">‡Æ§‡ÆÆ‡Æø‡Æ¥‡Øç</button>
  </div>

  <!-- Header -->
  <h1 class="text-3xl sm:text-4xl font-bold mb-6 text-purple-400" data-i18n="addMemberModal">
    ‚ûï Add New Member
  </h1>

  <!-- Form -->
  <form id="memberForm" class="bg-gray-800 p-6 rounded-lg shadow-lg w-full max-w-sm space-y-3">
    <input type="text" id="name" placeholder="Name" required 
           class="w-full p-2 rounded bg-gray-700 text-white" data-i18n-placeholder="name">
    
    <input type="date" id="birthday" required 
           class="w-full p-2 rounded bg-gray-700 text-white">

    <select id="sex" required class="w-full p-2 rounded bg-gray-700 text-white">
      <option value="" data-i18n="selectSex">Select Sex</option>
      <option value="Male" data-i18n="male">Male</option>
      <option value="Female" data-i18n="female">Female</option>
    </select>

    <textarea id="family" placeholder="Family Members" 
              class="w-full p-2 rounded bg-gray-700 text-white" 
              data-i18n-placeholder="family"></textarea>

    <button type="submit" class="w-full py-2 bg-blue-600 rounded" data-i18n="save">Save</button>
  </form>

  <!-- Status -->
  <p id="status" class="mt-4 text-lg"></p>

  <!-- Back Button -->
  <a href="index.html" class="mt-6 inline-block px-6 py-2 bg-red-600 rounded" data-i18n="close">
    üîô Back to Home
  </a>

  <script>
    /* üî§ Translations */
    const translations = {
      en: {
        addMemberModal:"Add Member", selectSex:"Select Sex", male:"Male", female:"Female",
        save:"Save", close:"Back to Home", submitted:"‚úÖ Member submitted for approval!",
        name:"Name", family:"Family Members"
      },
      si: {
        addMemberModal:"‡∑É‡∑è‡∂∏‡∑è‡∂¢‡∑í‡∂ö‡∂∫‡∑ô‡∂ö‡∑ä ‡∂ë‡∂ö‡∑ä ‡∂ö‡∂ª‡∂±‡∑ä‡∂±", selectSex:"‡∑É‡∑ä‡∂≠‡∑ä‚Äç‡∂ª‡∑ì/‡∂¥‡∑î‡∂ª‡∑î‡∑Ç ‡∂∑‡∑è‡∑Ä‡∂∫", male:"‡∂¥‡∑í‡∂ª‡∑í‡∂∏‡∑í", female:"‡∂ú‡∑ê‡∑Ñ‡∑ê‡∂´‡∑î",
        save:"‡∑É‡∑î‡∂ª‡∂ö‡∑í‡∂±‡∑ä‡∂±", close:"‡∂∏‡∑î‡∂Ω‡∑ä ‡∂¥‡∑í‡∂ß‡∑î‡∑Ä‡∂ß ‡∂∫‡∂±‡∑ä‡∂±", submitted:"‚úÖ ‡∑É‡∑è‡∂∏‡∑è‡∂¢‡∑í‡∂ö‡∂∫‡∑è ‡∂Ö‡∂±‡∑î‡∂∏‡∂≠ ‡∂ö‡∑í‡∂ª‡∑ì‡∂∏‡∂ß ‡∂â‡∂Ø‡∑í‡∂ª‡∑í‡∂¥‡∂≠‡∑ä ‡∂ö‡∂ª‡∂± ‡∂Ω‡∂Ø‡∑í!",
        name:"‡∂±‡∂∏", family:"‡∂¥‡∑Ä‡∑î‡∂Ω‡∑ö ‡∑É‡∑è‡∂∏‡∑è‡∂¢‡∑í‡∂ö‡∂∫‡∑í‡∂±‡∑ä"
      },
      ta: {
        addMemberModal:"‡Æâ‡Æ±‡ØÅ‡Æ™‡Øç‡Æ™‡Æø‡Æ©‡Æ∞‡Øç ‡Æö‡Øá‡Æ∞‡Øç‡Æï‡Øç‡Æï‡Æµ‡ØÅ‡ÆÆ‡Øç", selectSex:"‡Æ™‡Ææ‡Æ≤‡Æø‡Æ©‡ÆÆ‡Øç ‡Æ§‡Øá‡Æ∞‡Øç‡Æ®‡Øç‡Æ§‡ØÜ‡Æü‡ØÅ‡Æï‡Øç‡Æï‡Æµ‡ØÅ‡ÆÆ‡Øç", male:"‡ÆÜ‡Æ£‡Øç", female:"‡Æ™‡ØÜ‡Æ£‡Øç",
        save:"‡Æö‡Øá‡ÆÆ‡Æø‡Æï‡Øç‡Æï‡Æµ‡ØÅ‡ÆÆ‡Øç", close:"‡ÆÆ‡ØÅ‡Æ§‡Æ©‡Øç‡ÆÆ‡Øà ‡Æ™‡Æï‡Øç‡Æï‡Æ§‡Øç‡Æ§‡Æø‡Æ±‡Øç‡Æï‡ØÅ‡Æ§‡Øç ‡Æ§‡Æø‡Æ∞‡ØÅ‡ÆÆ‡Øç‡Æ™‡Æµ‡ØÅ‡ÆÆ‡Øç", submitted:"‚úÖ ‡Æâ‡Æ±‡ØÅ‡Æ™‡Øç‡Æ™‡Æø‡Æ©‡Æ∞‡Øç ‡Æí‡Æ™‡Øç‡Æ™‡ØÅ‡Æ§‡Æ≤‡ØÅ‡Æï‡Øç‡Æï‡Ææ‡Æï ‡Æö‡ÆÆ‡Æ∞‡Øç‡Æ™‡Øç‡Æ™‡Æø‡Æï‡Øç‡Æï‡Æ™‡Øç‡Æ™‡Æü‡Øç‡Æü‡Ææ‡Æ∞‡Øç!",
        name:"‡Æ™‡ØÜ‡ÆØ‡Æ∞‡Øç", family:"‡Æï‡ØÅ‡Æü‡ØÅ‡ÆÆ‡Øç‡Æ™ ‡Æâ‡Æ±‡ØÅ‡Æ™‡Øç‡Æ™‡Æø‡Æ©‡Æ∞‡Øç‡Æï‡Æ≥‡Øç"
      }
    };

    function setLanguage(lang){
      document.querySelectorAll("[data-i18n]").forEach(el=>{
        if(translations[lang][el.getAttribute("data-i18n")])
          el.textContent = translations[lang][el.getAttribute("data-i18n")];
      });
      document.querySelectorAll("[data-i18n-placeholder]").forEach(el=>{
        if(translations[lang][el.getAttribute("data-i18n-placeholder")])
          el.placeholder = translations[lang][el.getAttribute("data-i18n-placeholder")];
      });
    }

    /* üî• Firebase Setup */
    const firebaseConfig = {
      apiKey:"AIzaSyANUfgVwR0uWPOaFzf1GrehpfitR1sUGw0",
      authDomain:"project01-d5df2.firebaseapp.com",
      projectId:"project01-d5df2",
      storageBucket:"project01-d5df2.firebasestorage.app",
      messagingSenderId:"398259647179",
      appId:"1:398259647179:web:54c78c2144a5d70e58614e",
      measurementId:"G-Q1ZVC5C7LZ"
    };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();

    const showStatus=(msg,s=true)=>{
      const el=document.getElementById("status");
      el.textContent=msg;
      el.className=s?"text-green-400 mt-4":"text-red-400 mt-4";
    };

    /* üíæ Submit Member Data */
    document.getElementById("memberForm").addEventListener("submit", async e=>{
      e.preventDefault();
      const data={
        name:document.getElementById("name").value,
        birthday:document.getElementById("birthday").value,
        sex:document.getElementById("sex").value,
        family:document.getElementById("family").value,
        submittedAt:new Date()
      };
      try{
        await db.collection("pendingMembers").add(data);
        showStatus(translations['en'].submitted);
        document.getElementById("memberForm").reset();
      }catch(err){ showStatus("‚ùå "+err.message,false); }
    });
  </script>
  <!-- Footer -->
  <footer class="mt-10 text-gray-400 text-sm">
    ¬© 2025 Committee Management | All Rights Reserved
  </footer>

</body>
</html>

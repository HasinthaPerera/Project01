<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Member Management System</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- PDF Library -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <style>
    @keyframes fadeInScale {
      0% { opacity: 0; transform: scale(0.9); }
      100% { opacity: 1; transform: scale(1); }
    }
    @keyframes slideDownFade {
      0% { opacity: 0; transform: translateY(-10px); }
      100% { opacity: 1; transform: translateY(0); }
    }
    @keyframes glowPulse {
      0%, 100% { text-shadow: 0 0 2px #60a5fa, 0 0 4px #9333ea; }
      50% { text-shadow: 0 0 3px #3b82f6, 0 0 6px #a855f7; }
    }
  </style>
</head>
<body class="bg-gradient-to-br from-gray-900 via-gray-800 to-black text-white min-h-screen">

  <!-- Top Bar -->
  <div class="flex justify-between items-center p-4">
    <!-- Language Switch -->
    <div class="space-x-2">
      <button onclick="setLanguage('en')" class="px-3 py-1 bg-blue-600 hover:bg-blue-700 rounded-lg text-sm shadow">EN</button>
      <button onclick="setLanguage('si')" class="px-3 py-1 bg-green-600 hover:bg-green-700 rounded-lg text-sm shadow">à·ƒà·’à¶‚</button>
      <button onclick="setLanguage('ta')" class="px-3 py-1 bg-pink-600 hover:bg-pink-700 rounded-lg text-sm shadow">à®¤à®®à®¿à®´à¯</button>
    </div>

    <!-- Owner Access -->
    <div>
      <button id="ownerLoginBtn" onclick="showOwnerLogin()" 
        class="px-6 py-2 bg-gray-700 hover:bg-gray-600 rounded-xl shadow-lg animate-pulse transform hover:scale-105 transition">
        ğŸ” <span data-i18n="ownerAccess">Owner Access</span>
      </button>
      <button id="downloadBtn" onclick="downloadSubmissions()" 
        class="px-6 py-2 bg-purple-600 hover:bg-purple-700 rounded-xl shadow-lg hidden transform hover:scale-105 transition ml-2">
        ğŸ’¾ <span data-i18n="downloadData">Download JSON</span>
      </button>
      <button id="downloadPdfBtn" onclick="downloadPDF()" 
        class="px-6 py-2 bg-yellow-600 hover:bg-yellow-700 rounded-xl shadow-lg hidden transform hover:scale-105 transition ml-2">
        ğŸ“• <span>Download PDF</span>
      </button>
      <button id="logoutBtn" onclick="showLogoutConfirm()" 
        class="px-6 py-2 bg-red-600 hover:bg-red-700 rounded-xl shadow-lg hidden transform hover:scale-105 transition ml-2">
        ğŸšª <span data-i18n="logout">Logout</span>
      </button>
    </div>
  </div>

  <!-- Main Section -->
  <div class="min-h-screen flex flex-col items-center justify-center -mt-20 text-center">
    <h1 id="mainTitle" class="text-6xl font-extrabold mb-6 bg-gradient-to-r from-blue-400 to-purple-500 bg-clip-text text-transparent animate-[glowPulse_2s_infinite] drop-shadow-lg">
      Member Management System
    </h1>
    
    <div class="space-x-4 mb-6">
      <button onclick="openForm()" 
        class="px-6 py-3 bg-blue-600 hover:bg-blue-700 rounded-xl shadow-lg transform hover:scale-110 transition">
        â• <span data-i18n="addMember">Add New Member</span>
      </button>
      <button onclick="window.open('https://docs.google.com/spreadsheets/d/14a39saiscm07b_0uXkm4ShB5NysLfS-RWPNoanLUppU/edit?gid=0#gid=0','_blank')" 
        class="px-6 py-3 bg-green-600 hover:bg-green-700 rounded-xl shadow-lg transform hover:scale-110 transition">
        ğŸ“„ <span data-i18n="viewMembers">View All Members</span>
      </button>
    </div>
    
    <!-- Terms & Conditions PDFs -->
    <div class="mt-8 grid grid-cols-1 md:grid-cols-3 gap-4 max-w-4xl">
      <a href="terms1.pdf" target="_blank" 
        class="block px-6 py-4 bg-indigo-600 hover:bg-indigo-700 rounded-xl shadow-lg transform hover:scale-105 transition text-lg font-semibold">
        ğŸ“œ Committee Terms (Part 1)
      </a>
      <a href="terms2.pdf" target="_blank" 
        class="block px-6 py-4 bg-teal-600 hover:bg-teal-700 rounded-xl shadow-lg transform hover:scale-105 transition text-lg font-semibold">
        ğŸ“œ Committee Terms (Part 2)
      </a>
      <a href="terms3.pdf" target="_blank" 
        class="block px-6 py-4 bg-rose-600 hover:bg-rose-700 rounded-xl shadow-lg transform hover:scale-105 transition text-lg font-semibold">
        ğŸ“œ Committee Terms (Part 3)
      </a>
    </div>

    <div id="statusDisplay" class="hidden mb-4 p-4 rounded-xl max-w-2xl w-full mx-4 animate-[slideDownFade_0.5s_ease]"></div>
  </div>

  <!-- Owner Login Modal -->
  <div id="ownerModal" class="fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center hidden">
    <div class="bg-gray-800 rounded-2xl shadow-lg p-8 w-full max-w-sm relative mx-4 animate-[fadeInScale_0.3s_ease]">
      <button onclick="closeOwnerLogin()" class="absolute top-3 right-3 text-gray-400 hover:text-white text-2xl">&times;</button>
      <h2 class="text-2xl font-semibold mb-6 text-center">ğŸ” <span data-i18n="ownerAccess">Owner Access</span></h2>
      <form id="ownerForm" class="space-y-4">
        <div>
          <label for="ownerPassword" class="block text-gray-200 font-medium mb-1" data-i18n="password">Password</label>
          <input type="password" id="ownerPassword" required placeholder="Enter owner password"
            class="w-full p-3 rounded-xl border border-gray-600 bg-gray-700 text-white focus:ring-2 focus:ring-blue-500 transition">
        </div>
        <button type="submit" class="w-full py-3 bg-blue-500 hover:bg-blue-600 rounded-xl font-semibold transform hover:scale-105 transition">
          ğŸ”“ <span data-i18n="unlockFeatures">Unlock Owner Features</span>
        </button>
      </form>
    </div>
  </div>

  <!-- Logout Confirmation Modal -->
  <div id="logoutModal" class="fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center hidden">
    <div class="bg-gray-800 rounded-2xl shadow-lg p-8 w-full max-w-sm relative mx-4 animate-[fadeInScale_0.3s_ease]">
      <button onclick="closeLogoutConfirm()" class="absolute top-3 right-3 text-gray-400 hover:text-white text-2xl">&times;</button>
      <h2 class="text-2xl font-semibold mb-6 text-center">ğŸšª <span data-i18n="logoutConfirm">Confirm Logout</span></h2>
      <form id="logoutForm" class="space-y-4">
        <div>
          <label for="logoutPassword" class="block text-gray-200 font-medium mb-1" data-i18n="password">Password</label>
          <input type="password" id="logoutPassword" required placeholder="Enter password to logout"
            class="w-full p-3 rounded-xl border border-gray-600 bg-gray-700 text-white focus:ring-2 focus:ring-red-500 transition">
        </div>
        <button type="submit" class="w-full py-3 bg-red-500 hover:bg-red-600 rounded-xl font-semibold transform hover:scale-105 transition">
          âœ… <span data-i18n="logout">Logout</span>
        </button>
      </form>
    </div>
  </div>

  <!-- Add Member Modal -->
  <div id="formModal" class="fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center hidden">
    <div class="bg-gray-800 rounded-2xl shadow-lg p-8 w-full max-w-lg relative mx-4 animate-[fadeInScale_0.3s_ease]">
      <button onclick="closeForm()" class="absolute top-3 right-3 text-gray-400 hover:text-white text-2xl">&times;</button>
      <h2 class="text-2xl font-semibold mb-6" data-i18n="addMember">Add Member</h2>
      <form id="memberForm" class="space-y-4">
        <div>
          <label for="name" class="block text-gray-200 font-medium mb-1" data-i18n="fullName">Full Name</label>
          <input type="text" id="name" required class="w-full p-3 rounded-xl border border-gray-600 bg-gray-700 text-white focus:ring-2 focus:ring-blue-500 transition">
        </div>
        <div>
          <label for="birthday" class="block text-gray-200 font-medium mb-1" data-i18n="birthday">Birthday</label>
          <input type="date" id="birthday" required class="w-full p-3 rounded-xl border border-gray-600 bg-gray-700 text-white focus:ring-2 focus:ring-green-500 transition">
        </div>
        <div>
          <label for="sex" class="block text-gray-200 font-medium mb-1" data-i18n="sex">Sex</label>
          <select id="sex" required class="w-full p-3 rounded-xl border border-gray-600 bg-gray-700 text-white focus:ring-2 focus:ring-purple-500 transition">
            <option value="">-- Select --</option>
            <option value="Male">Male â™‚ï¸</option>
            <option value="Female">Female â™€ï¸</option>
            <option value="Other">Other âš§ï¸</option>
          </select>
        </div>
        <div>
          <label for="familyMembers" class="block text-gray-200 font-medium mb-1" data-i18n="familyMembers">Family Members (one per line)</label>
          <textarea id="familyMembers" rows="4" placeholder="John - Father&#10;Mary - Mother"
            class="w-full p-3 rounded-xl border border-gray-600 bg-gray-700 text-white focus:ring-2 focus:ring-pink-500 transition"></textarea>
        </div>
        <div class="space-y-3">
          <button type="submit" class="w-full py-3 bg-blue-500 hover:bg-blue-600 rounded-xl font-semibold transform hover:scale-105 transition">
            ğŸ’¾ <span data-i18n="saveLocal">Save Locally</span>
          </button>
          <button type="button" onclick="copyToClipboard()" class="w-full py-3 bg-green-500 hover:bg-green-600 rounded-xl font-semibold transform hover:scale-105 transition">
            ğŸ“‹ <span data-i18n="copyClipboard">Copy to Clipboard</span>
          </button>
        </div>
      </form>
    </div>
  </div>

<script>
  let memberData = [];
  let isOwner = false;
  const OWNER_PASSWORD = "Hasintha15$";

  // Translations
  const translations = {
    en: { title:"Member Management System",ownerAccess:"Owner Access",downloadData:"Download JSON",addMember:"Add New Member",viewMembers:"View All Members",password:"Password",unlockFeatures:"Unlock Owner Features",fullName:"Full Name",birthday:"Birthday",sex:"Sex",familyMembers:"Family Members (one per line, format: Name - Relation)",saveLocal:"Save Locally (Recommended)",copyClipboard:"Copy to Clipboard",logout:"Logout",logoutConfirm:"Confirm Logout" },
    si: { title:"à·ƒà·à¶¸à·à¶¢à·’à¶š à¶šà·…à¶¸à¶±à·à¶šà¶»à¶« à¶´à¶¯à·Šà¶°à¶­à·’à¶º",ownerAccess:"à¶…à¶ºà·’à¶­à·’à¶šà¶»à·” à¶´à·’à·€à·’à·ƒà·”à¶¸",downloadData:"JSON à¶¶à·à¶œà¶±à·Šà¶±",addMember:"à¶±à·€ à·ƒà·à¶¸à·à¶¢à·’à¶šà¶ºà·™à¶šà·” à¶‘à¶šà¶­à·” à¶šà¶»à¶±à·Šà¶±",viewMembers:"à·ƒà·’à¶ºà¶½à·” à·ƒà·à¶¸à·à¶¢à·’à¶šà¶ºà·’à¶±à·Š à¶¶à¶½à¶±à·Šà¶±",password:"à¶¸à·”à¶»à¶´à¶¯à¶º",unlockFeatures:"à¶…à¶ºà·’à¶­à·’à¶šà¶»à·”à¶œà·š à·€à·’à·à·šà·‚à·à¶‚à¶œ à¶…à¶œà·”à¶½à·” à·„à¶»à·’à¶±à·Šà¶±",fullName:"à·ƒà¶¸à·Šà¶´à·–à¶»à·Šà¶« à¶±à¶¸",birthday:"à¶‹à¶´à¶±à·Šà¶¯à·’à¶±à¶º",sex:"à·ƒà·Šà¶­à·Šâ€à¶»à·“/à¶´à·”à¶»à·”à·‚ à¶·à·à·€à¶º",familyMembers:"à¶šàµà´Ÿàµà´‚à´¬ à·ƒà·à¶¸à·à¶¢à·’à¶šà¶ºà·’à¶±à·Š (à¶’à¶š à¶´à·™à·…à¶šà¶§ à¶‘à¶šà¶šà·Š)",saveLocal:"à·ƒà·Šà¶®à·à¶±à·’à¶šà·€ à·ƒà·”à¶»à¶šà·’à¶±à·Šà¶± (à¶ºà·à¶¢à·’à¶­à¶º)",copyClipboard:"à¶´à·”à·€à¶»à·”à¶§ à¶´à·’à¶§à¶´à¶­à·Š à¶šà¶»à¶±à·Šà¶±",logout:"à¶´à·’à¶§à·€à¶±à·Šà¶±",logoutConfirm:"à¶´à·’à¶§à·€à·“à¶¸ à¶­à·„à·€à·”à¶»à·” à¶šà¶»à¶±à·Šà¶±" },
    ta: { title:"à®‰à®±à¯à®ªà¯à®ªà®¿à®©à®°à¯ à®®à¯‡à®²à®¾à®£à¯à®®à¯ˆ à®…à®®à¯ˆà®ªà¯à®ªà¯",ownerAccess:"à®‰à®°à®¿à®®à¯ˆà®¯à®¾à®³à®°à¯ à®…à®£à¯à®•à®²à¯",downloadData:"JSON à®ªà®¤à®¿à®µà®¿à®±à®•à¯à®•à®µà¯à®®à¯",addMember:"à®ªà¯à®¤à®¿à®¯ à®‰à®±à¯à®ªà¯à®ªà®¿à®©à®°à¯ˆà®šà¯ à®šà¯‡à®°à¯à®•à¯à®•à®µà¯à®®à¯",viewMembers:"à®…à®©à¯ˆà®¤à¯à®¤à¯ à®‰à®±à¯à®ªà¯à®ªà®¿à®©à®°à¯à®•à®³à¯ˆà®¯à¯à®®à¯ à®•à®¾à®£à¯à®•",password:"à®•à®Ÿà®µà¯à®šà¯à®šà¯Šà®²à¯",unlockFeatures:"à®‰à®°à®¿à®®à¯ˆà®¯à®¾à®³à®°à¯ à®…à®®à¯à®šà®™à¯à®•à®³à¯ˆà®¤à¯ à®¤à®¿à®±à®•à¯à®•à®µà¯à®®à¯",fullName:"à®®à¯à®´à¯ à®ªà¯†à®¯à®°à¯",birthday:"à®ªà®¿à®±à®¨à¯à®¤à®¨à®¾à®³à¯",sex:"à®ªà®¾à®²à®¿à®©à®®à¯",familyMembers:"à®•à¯à®Ÿà¯à®®à¯à®ª à®‰à®±à¯à®ªà¯à®ªà®¿à®©à®°à¯à®•à®³à¯ (à®’à®©à¯à®±à¯à®•à¯à®•à¯ à®’à®°à¯ à®µà®°à®¿)",saveLocal:"à®‰à®³à¯à®³à¯‚à®°à¯ à®šà¯‡à®®à®¿à®•à¯à®•à®µà¯à®®à¯ (à®ªà®°à®¿à®¨à¯à®¤à¯à®°à¯ˆà®•à¯à®•à®ªà¯à®ªà®Ÿà¯à®•à®¿à®±à®¤à¯)",copyClipboard:"à®•à®¿à®³à®¿à®ªà¯à®ªà¯‹à®°à¯à®Ÿà¯à®•à¯à®•à¯ à®¨à®•à®²à¯†à®Ÿà¯à®•à¯à®•à®µà¯à®®à¯",logout:"à®µà¯†à®³à®¿à®¯à¯‡à®±à¯",logoutConfirm:"à®µà¯†à®³à®¿à®¯à¯‡à®±à¯à®¤à®²à¯ à®‰à®±à¯à®¤à®¿à®šà¯†à®¯à¯" }
  };

  function setLanguage(lang) {
    document.getElementById("mainTitle").textContent = translations[lang].title;
    document.querySelectorAll("[data-i18n]").forEach(el => {
      const key = el.getAttribute("data-i18n");
      if (translations[lang][key]) el.textContent = translations[lang][key];
    });
  }

  // Local storage
  function loadData() { const saved = localStorage.getItem('memberData'); if (saved) memberData = JSON.parse(saved); }
  function saveData() { localStorage.setItem('memberData', JSON.stringify(memberData)); }

  // Status messages
  function showStatus(message, isSuccess = true) {
    const statusDiv = document.getElementById('statusDisplay');
    statusDiv.className = `mb-4 p-4 rounded-xl max-w-2xl w-full mx-4 animate-[slideDownFade_0.5s_ease] ${isSuccess ? 'bg-green-600' : 'bg-red-600'}`;
    statusDiv.textContent = message;
    statusDiv.classList.remove('hidden');
    setTimeout(() => statusDiv.classList.add('hidden'), 5000);
  }

  // Form submit
  document.getElementById("memberForm").addEventListener("submit", function(event) {
    event.preventDefault();
    const formData = {
      name: document.getElementById("name").value,
      birthday: document.getElementById("birthday").value,
      sex: document.getElementById("sex").value,
      family: document.getElementById("familyMembers").value,
      timestamp: new Date().toISOString()
    };
    memberData.push(formData);
    saveData();
    showStatus(`âœ… Member "${formData.name}" saved successfully!`);
    document.getElementById("memberForm").reset();
    closeForm();
  });

  function copyToClipboard() {
    const formData = {
      name: document.getElementById("name").value,
      birthday: document.getElementById("birthday").value,
      sex: document.getElementById("sex").value,
      family: document.getElementById("familyMembers").value
    };
    const text = `Name: ${formData.name}\nBirthday: ${formData.birthday}\nSex: ${formData.sex}\nFamily Members:\n${formData.family}`;
    navigator.clipboard.writeText(text).then(() => {
      showStatus("ğŸ“‹ Member data copied to clipboard!");
    }).catch(() => {
      showStatus("âŒ Failed to copy", false);
    });
  }

  function downloadSubmissions() {
    if (!isOwner) return showStatus("âŒ Owner login required.", false);
    if (memberData.length === 0) return showStatus("ğŸ“ No data to download.", false);
    const dataStr = JSON.stringify(memberData, null, 2);
    const blob = new Blob([dataStr], {type: 'application/json'});
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url; a.download = `member_data_${new Date().toISOString().split('T')[0]}.json`;
    a.click();
    URL.revokeObjectURL(url);
    showStatus(`ğŸ’¾ Downloaded ${memberData.length} member records!`);
  }

  async function downloadPDF() {
    if (!isOwner) return showStatus("âŒ Owner login required.", false);
    if (memberData.length === 0) return showStatus("ğŸ“ No data to download.", false);

    const { jsPDF } = window.jspdf;
    const doc = new jsPDF();

    doc.setFont("helvetica", "bold");
    doc.setFontSize(18);
    doc.text("ğŸ“‹ Member Data Report", 14, 20);
    doc.setFontSize(12);
    doc.setFont("helvetica", "normal");

    let y = 30;
    memberData.forEach((m, i) => {
      doc.text(`${i+1}. ${m.name}`, 14, y);
      doc.text(`ğŸ‚ Birthday: ${m.birthday}`, 14, y+6);
      doc.text(`âš§ Sex: ${m.sex}`, 14, y+12);
      const family = m.family.split("\n").filter(Boolean);
      if (family.length > 0) {
        doc.text(`ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ Family:`, 14, y+18);
        family.forEach((f, idx) => {
          doc.text(`   ${f}`, 14, y+24+(idx*6));
        });
        y += 24 + (family.length*6);
      } else {
        y += 30;
      }
      if (y > 270) { doc.addPage(); y = 20; }
    });

    doc.save(`member_data_${new Date().toISOString().split('T')[0]}.pdf`);
    showStatus(`ğŸ“• PDF downloaded with ${memberData.length} records!`);
  }

  // Owner login
  function showOwnerLogin() { document.getElementById("ownerModal").classList.remove("hidden"); }
  function closeOwnerLogin() { document.getElementById("ownerModal").classList.add("hidden"); }

  document.getElementById("ownerForm").addEventListener("submit", function(e) {
    e.preventDefault();
    const pwd = document.getElementById("ownerPassword").value;
    if (pwd === OWNER_PASSWORD) {
      isOwner = true;
      document.getElementById("downloadBtn").classList.remove("hidden");
      document.getElementById("downloadPdfBtn").classList.remove("hidden");
      document.getElementById("logoutBtn").classList.remove("hidden");
      document.getElementById("ownerLoginBtn").classList.add("hidden");
      closeOwnerLogin();
      showStatus("âœ… Owner features unlocked!");
    } else {
      showStatus("âŒ Incorrect password", false);
    }
  });

  // Logout
  function showLogoutConfirm() { document.getElementById("logoutModal").classList.remove("hidden"); }
  function closeLogoutConfirm() { document.getElementById("logoutModal").classList.add("hidden"); }

  document.getElementById("logoutForm").addEventListener("submit", function(e) {
    e.preventDefault();
    const pwd = document.getElementById("logoutPassword").value;
    if (pwd === OWNER_PASSWORD) {
      isOwner = false;
      document.getElementById("downloadBtn").classList.add("hidden");
      document.getElementById("downloadPdfBtn").classList.add("hidden");
      document.getElementById("logoutBtn").classList.add("hidden");
      document.getElementById("ownerLoginBtn").classList.remove("hidden");
      closeLogoutConfirm();
      showStatus("âœ… Logged out successfully!");
    } else {
      showStatus("âŒ Incorrect password", false);
    }
  });

  // Form modal
  function openForm() { document.getElementById("formModal").classList.remove("hidden"); }
  function closeForm() { document.getElementById("formModal").classList.add("hidden"); }

  loadData();
</script>
</body>
</html>
